name: Kappa Project

# Later: Via the master branch only
on: [push]

jobs:
    docker:
        name: Buiding for Docker Hub
        runs-on: ubuntu-latest    
        steps:
            - name: checkout
              uses: actions/checkout@v4

            - name: Login to Docker Hub
              uses: docker/login-action@v3
              with:
                username: ${{ secrets.DOCKER_NAME }}
                password: ${{ secrets.DOCKER_ENTRY }}

              # https://github.com/marketplace/actions/build-and-push-docker-images  
            - name: Build the Docker image
              shell: bash
              env:
                REGISTRY: 'greyhypotheses'
                REPOSITORY: 'base'
                IMAGE_TAG: 'spark_scala_3.5.0'
              run: |
                docker build . --file Dockerfile --tag "$REGISTRY/$REPOSITORY:$IMAGE_TAG"
                docker push "$REGISTRY/$REPOSITORY:$IMAGE_TAG"
